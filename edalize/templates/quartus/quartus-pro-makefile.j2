# Auto generated by Edalize
NAME := {{ name }}
OPTIONS := {{ tool_options.quartus_options|join(' ') }}

all: sta

project: $(NAME).tcl
	quartus_sh $(OPTIONS) -t $(NAME).tcl

qsys: project
{% for qsys_file in src_files if qsys_file|qsys_file_filter %}
	qsys-generate {{ qsys_file|qsys_file_filter }} --synthesis=VERILOG --family="{{ tool_options.family }}" --part={{ tool_options.device }} --quartus-project=$(NAME)
{% endfor %}

syn: qsys
	quartus_syn $(OPTIONS) $(NAME)

fit: syn
	quartus_fit $(OPTIONS) $(NAME)

asm: fit
	quartus_asm $(OPTIONS) $(NAME)

sta: asm
	quartus_sta $(OPTIONS) $(NAME)

dse: syn
	quartus_dse $(NAME) --use-dse-file $(NAME).dse

clean:
	rm -rf *.* qdb tmp-clearbox

.PHONY: all project qsys syn fit asm sta dse clean
