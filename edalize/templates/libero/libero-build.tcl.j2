# This file is generated by Edalize.
# Microsemi Tcl Script
# Libero

puts "----------------- Opening project {{name}} ------------------------------"
open_project -file {{op}}{{prj_root}}/{{name}}.prjx{{cl}}

run_tool -name {SYNTHESIZE}
run_tool -name {PLACEROUTE}
run_tool -name {GENERATEPROGRAMMINGDATA}

{% if src_files | io_state_file is not none %}
puts "----------------- Configuring reprog IO States -----------------------------"
configure_tool \
	-name {IO_PROGRAMMING_STATE} \
	-params {{op}}ios_file:{{src_files | io_state_file}}{{cl}}
{%- endif %}

puts "----------------- Exporting Programming Job File -----------------------------"
export_prog_job \
    -job_file_name {{name}} \
    -export_dir {{prj_root}} \
    -bitstream_file_type {TRUSTED_FACILITY} \
    -bitstream_file_components {}

puts "----------------- Finished building project -----------------------------"

close_project -save 1
